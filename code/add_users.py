# script to add users to a running telegram to snoop on them

import os

screen_name = 'tg'
user_list_path = 'users.txt'

del_contact_screen = 'screen -S %s -p 0 -X stuff "del_contact %d_%s\n"'
add_contact_screen = 'screen -S %s -p 0 -X stuff "add_contact %s %d %s\n"'

idx = 1
for line in open(user_list_path):
    splitline = line.split()
    number = splitline[0]
    if len(splitline) > 1:
        name = splitline[1]
    else:
        name = 'X'

    cmd = del_contact_screen % (screen_name, idx, name)
    os.system(cmd)

    print 'Adding %s %s' % (number, name)

    cmd = add_contact_screen % (screen_name, number, idx, name)
    os.system(cmd)

    idx += 1

